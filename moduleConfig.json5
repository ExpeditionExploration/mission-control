// This file is used to configure various modules and common settings.

{
    // General settings that apply to all modules and drone core settings.
    "common": {},

    // Module-specific settings.
    "stats": {
        "server": {},
        "client": {}
    },
    "media": {
        "server": {},
        "client": {
            "webRtc": {

                // Needed for the drone to connect to stream video to Mission Control.
                "droneConnection": {
                    "enabled": true,
                    "signalingServer": "ws://your.signaling.server:8443",
                    "STUNServers": ["stun:stun.l.google.com:19302"]
                },

                // Needed for Mission Control to further share the stream.
                "signalingServer": {
                    "enabled": true,
                    "port": 8443,
                    "useSsl": false,
                    "sslCert": "/path/to/cert.pem",
                    "sslKey": "/path/to/key.pem",

                    // Proxied video settings for outgoing stream.
                    // This is for Mission Control running your host, not the drone.
                    "videoProxy": { 
                        "enabled": true,
                        "bitrate": 1000000,
                        "framerate": 15,
                        "width": 640,
                        "height": 480,
                        "useH264": true,

                        // TURN server settings if needed. It is used for NAT
                        // traversal when both peers are behind a restrictive
                        // firewall or NAT.
                        "turnServers": [
                            {
                                "urls": "turn:your.turn.server:3478",
                                "username": "username",
                                "credential": "password"
                            }
                        ]
                    },
                },
            }
        }
    },
    "lights": {
        "server": {
            "enabled": false,
            "pca9685": {
                "i2cBus": 4,
                "i2cAddr": "0x40",
                "frequency": 4096,
                "leds": {
                    "vis": 0,
                    "ir": 1,
                    "uv": 2
                }
            }
        },
        "client": {}
    },
    "control": {
        "server": {},
        "client": {}
    },
    "angle": {
        "server": {},
        "client": {}
    },
    "spatial": {
        "server": {},
        "client": {}
    },
    "imu": {
        "server": {
            "enabled": true,
            "bno085": {
                "i2cBus": 3,
                "i2cAddr": "0x4b",
                "useInterrupts": true,
                "interruptChip": "gpiochip0",
                "interruptLine": 23
            }
        },
        "client": {}
    },
    "battery": {
        "server": {
            "enabled": true,
            "simulated": true,
            "cellCapacity": 2550, // mAh
            "cellsInSeries": 2,
            "cellsInParallel": 3,
            "ina226": {
                "i2cBus": 1,
                "i2cAddr": "0x40",
                "shuntResistorOhms": 0.1
            }
        },
        "client": {}
    },
    "tof": {
        "server": {
            "enabled": true,
            "vl53l5cx": {
                "i2cBus": 1,
                "i2cAddr": "0x29",
                "rangingFrequency": 5
            }
        },
        "client": {}
    }
}